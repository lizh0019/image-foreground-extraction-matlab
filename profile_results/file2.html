<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><link rel="stylesheet" href="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /><title>Function details for SegmentExcGC</title><link rel="stylesheet" href="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size: 14pt; padding: 0; background: #FFE4B0">SegmentExcGC (1 call, 1.609 sec)</span><br/><i>Generated 31-Jul-2008 14:38:39 using real time.</i><br/>M-function in file D:\MMRS\Dev_Matlab\Image Segmentation\SegmentExcGC.m<br/>[Copy to new window for comparing multiple runs]<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/> No parent <div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line171">171</a></td><td class="td-linebottomrt"><pre>[SegImage LLabels] = GraphCutS...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.484 s</td><td class="td-linebottomrt" class="td-linebottomrt">30.1%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=30 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line213">213</a></td><td class="td-linebottomrt"><pre>edge_img = edge(SegImage,'cann...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.235 s</td><td class="td-linebottomrt" class="td-linebottomrt">14.6%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=15 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line28">28</a></td><td class="td-linebottomrt"><pre>blurred = imfilter(I,H,'replic...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.203 s</td><td class="td-linebottomrt" class="td-linebottomrt">12.6%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=13 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line91">91</a></td><td class="td-linebottomrt"><pre>MeanColors(i,3) = mean(I3(PI(i...</pre></td><td class="td-linebottomrt">4492</td><td class="td-linebottomrt">0.109 s</td><td class="td-linebottomrt" class="td-linebottomrt">6.8%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=7 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line90">90</a></td><td class="td-linebottomrt"><pre>MeanColors(i,2) = mean(I2(PI(i...</pre></td><td class="td-linebottomrt">4492</td><td class="td-linebottomrt">0.108 s</td><td class="td-linebottomrt" class="td-linebottomrt">6.7%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=7 height=10></td></tr><tr><td class="td-linebottomrt">Other lines &amp; overhead</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.470 s</td><td class="td-linebottomrt">29.2%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=29 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">1.609 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file81.html">GraphCutSegment</a></td><td class="td-linebottomrt">MEX-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.484 s</td><td class="td-linebottomrt">30.1%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=30 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file82.html">edge</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.235 s</td><td class="td-linebottomrt">14.6%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=15 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file21.html">imfilter</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.203 s</td><td class="td-linebottomrt">12.6%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=13 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file70.html">mean</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">13480</td><td class="td-linebottomrt">0.187 s</td><td class="td-linebottomrt">11.6%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=12 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file37.html">watershed</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.094 s</td><td class="td-linebottomrt">5.8%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=6 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file61.html">regionprops</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.062 s</td><td class="td-linebottomrt">3.9%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=4 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file91.html">imfill</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.046 s</td><td class="td-linebottomrt">2.9%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=3 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file33.html">setdiff</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.031 s</td><td class="td-linebottomrt">1.9%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=2 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file30.html">str2num</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">4</td><td class="td-linebottomrt">0.016 s</td><td class="td-linebottomrt">1.0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file71.html">union</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0.016 s</td><td class="td-linebottomrt">1.0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file79.html">cov</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">4</td><td class="td-linebottomrt">0.016 s</td><td class="td-linebottomrt">1.0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file43.html">repmat</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0.016 s</td><td class="td-linebottomrt">1.0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file15.html">fspecial</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0.015 s</td><td class="td-linebottomrt">0.9%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file72.html">kmeans</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0.015 s</td><td class="td-linebottomrt">0.9%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file3.html">strcat</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">3</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file5.html">mksopt</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file6.html">imread</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file28.html">num2str</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">5</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file20.html">meshgrid</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file32.html">sub2ind</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file80.html">SegmentExcGC>ClustDistMembership</a></td><td class="td-linebottomrt">M-subfunction</td><td class="td-linebottomrt">2</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file108.html">bwlabel</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file114.html">imwrite</a></td><td class="td-linebottomrt">M-function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.173 s</td><td class="td-linebottomrt">10.8%</td><td class="td-linebottomrt"><img src="file:///C:\MATLABR14SP3\toolbox\matlab\codetools\private\one-pixel.gif" width=11 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">1.609 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>M-Lint results</strong><br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Message</td></tr><tr><td class="td-linebottomrt"><a href="#Line45">45</a></td><td class="td-linebottomrt"><span class="mono">STR2DOUBLE is faster than STR2NUM, however STR2DOUBLE operates only on scalars. Use the function that best suits your needs.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line48">48</a></td><td class="td-linebottomrt"><span class="mono">STR2DOUBLE is faster than STR2NUM, however STR2DOUBLE operates only on scalars. Use the function that best suits your needs.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line51">51</a></td><td class="td-linebottomrt"><span class="mono">STR2DOUBLE is faster than STR2NUM, however STR2DOUBLE operates only on scalars. Use the function that best suits your needs.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line54">54</a></td><td class="td-linebottomrt"><span class="mono">STR2DOUBLE is faster than STR2NUM, however STR2DOUBLE operates only on scalars. Use the function that best suits your needs.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line124">124</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'FCClusters' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line131">131</a></td><td class="td-linebottomrt"><span class="mono">Logical indexing is usually faster than FIND.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line137">137</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'BCClusters' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line144">144</a></td><td class="td-linebottomrt"><span class="mono">Logical indexing is usually faster than FIND.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line159">159</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'FInd' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line160">160</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'BInd' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line183">183</a></td><td class="td-linebottomrt"><span class="mono">Logical indexing is usually faster than FIND.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line184">184</a></td><td class="td-linebottomrt"><span class="mono">Logical indexing is usually faster than FIND.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line193">193</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'newFDists' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line194">194</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'newBDists' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line197">197</a></td><td class="td-linebottomrt"><span class="mono">Logical indexing is usually faster than FIND.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line204">204</a></td><td class="td-linebottomrt"><span class="mono">Logical indexing is usually faster than FIND.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line213">213</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'edge_img' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line219">219</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'c' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line222">222</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'C' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line225">225</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'SegMask' might never be used.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line234">234</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to variable 'SegImage1' might never be used.</span></td></tr></table><div class="grayline"/><strong>Coverage results</strong><br/>[ Show coverage for parent directory ]<br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in file</td><td class="td-linebottomrt">280</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">147</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">133</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">114</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">19</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">85.71 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><pre> <span style="color: #FF0000; font-weight: bold; text-decoration: none">  time</span> <span style="color: #0000FF; font-weight: bold; text-decoration: none">  calls</span>  <span style="font-weight: bold; text-decoration: none">line</span><br/>               <span style="color: #A0A0A0">   1</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">function SegmentExcGC(InImgFile, OutImgFile, OutSegResultFilename, topX, topY, bottomX, bottomY)</span><br/>               <span style="color: #A0A0A0">   2</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% SEGMENTGC  - Main GrabCut segmentation function</span><br/>               <span style="color: #A0A0A0">   3</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% SEGMENTGC(IMNAME, IH, ALG) - ImName - Image to segment</span><br/>               <span style="color: #A0A0A0">   4</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% IH - Image Handle</span><br/>               <span style="color: #A0A0A0">   5</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%tic</span><br/>               <span style="color: #A0A0A0">   6</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">   7</span> <span style="color: #000000; background: #FFFFFF; padding: 1">ImName = <a href="file3.html">strcat</a>('D:\MMRS\Upload\'  , InImgFile);         %Input MAT file </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">   8</span> <span style="color: #000000; background: #FFFFFF; padding: 1">OutImName = <a href="file3.html">strcat</a>('D:\MMRS\Upload\'  , OutImgFile); %Output Index text file </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">   9</span> <span style="color: #000000; background: #FFFFFF; padding: 1">OutSegResult = <a href="file3.html">strcat</a>('D:\MMRS\Upload\'  , OutSegResultFilename);         %Input MAT file </span><br/>               <span style="color: #A0A0A0">  10</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%OutSegItr = strcat('D:\MMRS\Upload\'  , OutSegItrFilename); %Output Index text file</span><br/>               <span style="color: #A0A0A0">  11</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  12</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  13</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%alg=0;</span><br/>               <span style="color: #A0A0A0">  14</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  15</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Global Variables</span><br/>               <span style="color: #A0A0A0">  16</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%global sopt segImageHandle;</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  17</span> <span style="color: #000000; background: #FFFFFF; padding: 1">global sopt; </span><br/>               <span style="color: #A0A0A0">  18</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  19</span> <span style="color: #000000; background: #FFFFFF; padding: 1">sopt = <a href="file5.html">mksopt</a>; </span><br/>               <span style="color: #A0A0A0">  20</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  21</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Read input image</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  22</span> <span style="color: #000000; background: #FFFFFF; padding: 1">I = <a href="file6.html">imread</a>(ImName); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  23</span> <span style="color: #000000; background: #FFFFFF; padding: 1">I1 = I(:,:,1); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  24</span> <span style="color: #000000; background: #FFFFFF; padding: 1">I2 = I(:,:,2); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  25</span> <span style="color: #000000; background: #FFFFFF; padding: 1">I3 = I(:,:,3); </span><br/>               <span style="color: #A0A0A0">  26</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  27</span> <span style="color: #000000; background: #FFFFFF; padding: 1">H = <a href="file15.html">fspecial</a>('disk',10); </span><br/><span style="color: #FF0000">  0.20 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  28</span> <a name="Line28"></a><span style="color: #000000; background: #FFC6C6; padding: 1">blurred = <a href="file21.html">imfilter</a>(I,H,'replicate'); </span><br/>               <span style="color: #A0A0A0">  29</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  30</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Final Segmented Image</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  31</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage = zeros(size(I)); </span><br/>               <span style="color: #A0A0A0">  32</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  33</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  34</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Stop unnecessary warnings</span><br/>               <span style="color: #A0A0A0">  35</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%warning('off','all');</span><br/>               <span style="color: #A0A0A0">  36</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  37</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%% Marking the Inner Rectangle around the foreground object</span><br/>               <span style="color: #A0A0A0">  38</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%% Get two points from the user</span><br/>               <span style="color: #A0A0A0">  39</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Set the image</span><br/>               <span style="color: #A0A0A0">  40</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%set(ih, 'Cdata', I);</span><br/>               <span style="color: #A0A0A0">  41</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%axis('image');axis('ij');axis('off');</span><br/>               <span style="color: #A0A0A0">  42</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%drawnow;</span><br/>               <span style="color: #A0A0A0">  43</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  44</span> <span style="color: #000000; background: #FFFFFF; padding: 1">TMP=<a href="file28.html">num2str</a>(topX); </span><br/><a name="Line45"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  45</span> <span style="color: #000000; background: #FFFFFF; padding: 1">CtopX=<a href="file30.html">str2num</a>(TMP); </span><br/>               <span style="color: #A0A0A0">  46</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  47</span> <span style="color: #000000; background: #FFFFFF; padding: 1">TMP=<a href="file28.html">num2str</a>(topY); </span><br/><a name="Line48"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  48</span> <span style="color: #000000; background: #FFFFFF; padding: 1">CtopY=<a href="file30.html">str2num</a>(TMP); </span><br/>               <span style="color: #A0A0A0">  49</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  50</span> <span style="color: #000000; background: #FFFFFF; padding: 1">TMP=<a href="file28.html">num2str</a>(bottomX); </span><br/><a name="Line51"></a><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  51</span> <span style="color: #000000; background: #FFFFFF; padding: 1">CbottomX=<a href="file30.html">str2num</a>(TMP); </span><br/>               <span style="color: #A0A0A0">  52</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  53</span> <span style="color: #000000; background: #FFFFFF; padding: 1">TMP=<a href="file28.html">num2str</a>(bottomY); </span><br/><a name="Line54"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  54</span> <span style="color: #000000; background: #FFFFFF; padding: 1">CbottomY=<a href="file30.html">str2num</a>(TMP); </span><br/>               <span style="color: #A0A0A0">  55</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  56</span> <span style="color: #000000; background: #FFFFFF; padding: 1">fp=[CtopY, CtopX; CbottomY, CbottomX]; </span><br/>               <span style="color: #A0A0A0">  57</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%fp = ginput(2);</span><br/>               <span style="color: #A0A0A0">  58</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%fp = round(fp);</span><br/>               <span style="color: #A0A0A0">  59</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  60</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Save the points for future use</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  61</span> <span style="color: #000000; background: #FFFFFF; padding: 1">save rectpts fp; </span><br/>               <span style="color: #A0A0A0">  62</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  63</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Width of Strip</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  64</span> <span style="color: #000000; background: #FFFFFF; padding: 1">StripWidth = sopt.StripWidth_AC_ACR;        </span><br/>               <span style="color: #A0A0A0">  65</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  66</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Get inner indices</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  67</span> <span style="color: #000000; background: #FFFFFF; padding: 1">[fxi,fyi] = <a href="file20.html">meshgrid</a>(min(fp(:,1)):max(fp(:,1)),min(fp(:,2)):max(fp(:,2))); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  68</span> <span style="color: #000000; background: #FFFFFF; padding: 1">InsideFindices = <a href="file32.html">sub2ind</a>(size(I1),fyi, fxi); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  69</span> <span style="color: #000000; background: #FFFFFF; padding: 1">InsideFindices = InsideFindices(:); </span><br/>               <span style="color: #A0A0A0">  70</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  71</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Form the Outside rectangular bounding box -- add StripWidth on all 4 sides</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  72</span> <span style="color: #000000; background: #FFFFFF; padding: 1">[fxo,fyo] = <a href="file20.html">meshgrid</a>( max((min(fp(:,1)) - StripWidth),1) : min((max(fp(:,1)) + StripWidth), size(I1,2)) , max((min(fp(:,2)) - StripWidth),1) : min((max(fp(:,2)) + StripWidth), size(I1,1)) ); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  73</span> <span style="color: #000000; background: #FFFFFF; padding: 1">OutsideFindices = <a href="file32.html">sub2ind</a>(size(I1),fyo, fxo); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  74</span> <span style="color: #000000; background: #FFFFFF; padding: 1">OutsideFindices = OutsideFindices(:); </span><br/>               <span style="color: #A0A0A0">  75</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/><span style="color: #FF0000">  0.03 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  76</span> <span style="color: #000000; background: #FFFFFF; padding: 1">Bindices = <a href="file33.html">setdiff</a>(OutsideFindices, InsideFindices); </span><br/>               <span style="color: #A0A0A0">  77</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%Allindices = [1:size(I1,1)*size(I1,2)]';</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  78</span> <span style="color: #000000; background: #FFFFFF; padding: 1">Findices = InsideFindices; </span><br/>               <span style="color: #A0A0A0">  79</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  80</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Water shed pixels</span><br/><span style="color: #FF0000">  0.09 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  81</span> <span style="color: #000000; background: #FFF0F0; padding: 1">L = <a href="file37.html">watershed</a>(I(:,:,1)); </span><br/>               <span style="color: #A0A0A0">  82</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  83</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%% Finding Mean colors of the regions  %%%%%%%%%%%%%%%%%%</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  84</span> <span style="color: #000000; background: #FFFFFF; padding: 1">numLabels = max(L(:)); </span><br/><span style="color: #FF0000">  0.06 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  85</span> <span style="color: #000000; background: #FFF0F0; padding: 1">PI = <a href="file61.html">regionprops</a>(L,'PixelIdxList'); </span><br/>               <span style="color: #A0A0A0">  86</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  87</span> <span style="color: #000000; background: #FFFFFF; padding: 1">MeanColors = zeros(numLabels,3); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  88</span> <span style="color: #000000; background: #FFFFFF; padding: 1">for i=1:numLabels </span><br/><span style="color: #FF0000">  0.10 </span><span style="color: #0000FF">   4492 </span><span style="color: #000000; font-weight: bold">  89</span> <span style="color: #000000; background: #FFF0F0; padding: 1">    MeanColors(i,1) = <a href="file70.html">mean</a>(I1(PI(i).PixelIdxList)); </span><br/><span style="color: #FF0000">  0.11 </span><span style="color: #0000FF">   4492 </span><span style="color: #000000; font-weight: bold">  90</span> <a name="Line90"></a><span style="color: #000000; background: #FFE2E2; padding: 1">    MeanColors(i,2) = <a href="file70.html">mean</a>(I2(PI(i).PixelIdxList)); </span><br/><span style="color: #FF0000">  0.11 </span><span style="color: #0000FF">   4492 </span><span style="color: #000000; font-weight: bold">  91</span> <a name="Line91"></a><span style="color: #000000; background: #FFE2E2; padding: 1">    MeanColors(i,3) = <a href="file70.html">mean</a>(I3(PI(i).PixelIdxList)); </span><br/>       <span style="color: #0000FF">   4492 </span><span style="color: #000000; font-weight: bold">  92</span> <span style="color: #000000; background: #FFFFFF; padding: 1">end </span><br/>               <span style="color: #A0A0A0">  93</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0">  94</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0">  95</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%% Finding Foreground and Background Labels from pixels%%</span><br/>               <span style="color: #A0A0A0">  96</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  97</span> <span style="color: #000000; background: #FFFFFF; padding: 1">FLabels = L(int32(Findices)); </span><br/><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  98</span> <span style="color: #000000; background: #FFFFFF; padding: 1">FLabels = <a href="file71.html">union</a>(FLabels,[]);         %% Set-ifying the set of labels (Sorting) </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold">  99</span> <span style="color: #000000; background: #FFFFFF; padding: 1">if(FLabels(1)==0)                   %% Removing Boundary Labels </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 100</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    FLabels = FLabels(2:end); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 101</span> <span style="color: #000000; background: #FFFFFF; padding: 1">end </span><br/>               <span style="color: #A0A0A0"> 102</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 103</span> <span style="color: #000000; background: #FFFFFF; padding: 1">BLabels = L(int32(Bindices)); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 104</span> <span style="color: #000000; background: #FFFFFF; padding: 1">BLabels = <a href="file71.html">union</a>(BLabels,[]);         %% Set-ifying the set of labels </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 105</span> <span style="color: #000000; background: #FFFFFF; padding: 1">if(BLabels(1)==0)                   %% Removing Boundary Labels </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 106</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    BLabels = BLabels(2:end); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 107</span> <span style="color: #000000; background: #FFFFFF; padding: 1">end </span><br/>               <span style="color: #A0A0A0"> 108</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 109</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%% BLabels remain fixed -- no change</span><br/>               <span style="color: #A0A0A0"> 110</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%% ULabels -- Uncertain labels -- on which optimization done...</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 111</span> <span style="color: #000000; background: #FFFFFF; padding: 1">ULabels = FLabels; </span><br/>               <span style="color: #A0A0A0"> 112</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 113</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 114</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%% Finding Initial Estimate of foregound and background color clusters %%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 115</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 116</span> <span style="color: #000000; background: #FFFFFF; padding: 1">NumFClusters = sopt.NumFClusters_AC; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 117</span> <span style="color: #000000; background: #FFFFFF; padding: 1">NumBClusters = sopt.NumBClusters_AC; </span><br/>               <span style="color: #A0A0A0"> 118</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 119</span> <span style="color: #000000; background: #FFFFFF; padding: 1">FColors = MeanColors(FLabels,:); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 120</span> <span style="color: #000000; background: #FFFFFF; padding: 1">BColors = MeanColors(BLabels,:); </span><br/>               <span style="color: #A0A0A0"> 121</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 122</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%% Initializing the GMM's %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 123</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%% Using Just kmeans %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/><a name="Line124"></a><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 124</span> <span style="color: #000000; background: #FFFFFF; padding: 1">[FId FCClusters] = <a href="file72.html">kmeans</a>(FColors, NumFClusters); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 125</span> <span style="color: #000000; background: #FFFFFF; padding: 1">Fdim = size(FColors,2); </span><br/>               <span style="color: #A0A0A0"> 126</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 127</span> <span style="color: #000000; background: #FFFFFF; padding: 1">FCClusters = zeros(Fdim, NumFClusters); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 128</span> <span style="color: #000000; background: #FFFFFF; padding: 1">FWeights = zeros(1,NumFClusters); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 129</span> <span style="color: #000000; background: #FFFFFF; padding: 1">FCovs = zeros(Fdim, Fdim, NumFClusters); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 130</span> <span style="color: #000000; background: #FFFFFF; padding: 1">for k=1:NumFClusters </span><br/><a name="Line131"></a>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 131</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    relColors = FColors(find(FId==k),:);        %% Colors belonging to cluster k </span><br/>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 132</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    FCClusters(:,k) = <a href="file70.html">mean</a>(relColors,1)'; </span><br/><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 133</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    FCovs(:,:,k) = <a href="file79.html">cov</a>(relColors); </span><br/>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 134</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    FWeights(1,k) = length(find(FId==k)) / length(FId); </span><br/>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 135</span> <span style="color: #000000; background: #FFFFFF; padding: 1">end </span><br/>               <span style="color: #A0A0A0"> 136</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/><a name="Line137"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 137</span> <span style="color: #000000; background: #FFFFFF; padding: 1">[BId BCClusters] = <a href="file72.html">kmeans</a>(BColors, NumBClusters); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 138</span> <span style="color: #000000; background: #FFFFFF; padding: 1">Bdim = size(BColors,2); </span><br/>               <span style="color: #A0A0A0"> 139</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 140</span> <span style="color: #000000; background: #FFFFFF; padding: 1">BCClusters = zeros(Bdim, NumBClusters); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 141</span> <span style="color: #000000; background: #FFFFFF; padding: 1">BWeights = zeros(1,NumBClusters); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 142</span> <span style="color: #000000; background: #FFFFFF; padding: 1">BCovs = zeros(Bdim, Bdim, NumBClusters); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 143</span> <span style="color: #000000; background: #FFFFFF; padding: 1">for k=1:NumBClusters </span><br/><a name="Line144"></a>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 144</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    relColors = BColors(find(BId==k),:);        %% Colors belonging to cluster k </span><br/>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 145</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    BCClusters(:,k) = <a href="file70.html">mean</a>(relColors,1)'; </span><br/>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 146</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    BCovs(:,:,k) = <a href="file79.html">cov</a>(relColors); </span><br/>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 147</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    BWeights(1,k) = length(find(BId==k)) / length(BId); </span><br/>       <span style="color: #0000FF">      2 </span><span style="color: #000000; font-weight: bold"> 148</span> <span style="color: #000000; background: #FFFFFF; padding: 1">end </span><br/>               <span style="color: #A0A0A0"> 149</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 150</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%% GMM's Initialized %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 151</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 152</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%% The iterative Loop %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 153</span> <span style="color: #000000; background: #FFFFFF; padding: 1">lambda = sopt.lambda_AC; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 154</span> <span style="color: #000000; background: #FFFFFF; padding: 1">numIter = sopt.numIter_AC; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 155</span> <span style="color: #000000; background: #FFFFFF; padding: 1">for i = 1:numIter </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 156</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    disp(['Iteration - ', <a href="file28.html">num2str</a>(i)]); </span><br/>               <span style="color: #A0A0A0"> 157</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 158</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">    % Foreground and Background edge weights</span><br/><a name="Line159"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 159</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    [FDist, FInd] = <a href="file80.html">ClustDistMembership</a>(MeanColors(ULabels,:), FCClusters, FCovs, FWeights); </span><br/><a name="Line160"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 160</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    [BDist, BInd] = <a href="file80.html">ClustDistMembership</a>(MeanColors(ULabels,:), BCClusters, BCovs, BWeights); </span><br/>               <span style="color: #A0A0A0"> 161</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 162</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 163</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">    %% Segments labeled from 0 now -- -1 is for boundary pixels</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 164</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    L = L-1; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 165</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    FLabels = FLabels-1; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 166</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    BLabels = BLabels-1; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 167</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    ULabels = ULabels-1; </span><br/>               <span style="color: #A0A0A0"> 168</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">    %%%%%%%%%%%%%  The Mex Function for GraphCutSegment %%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 169</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">    %%% SegImage is the segmented image, %%% LLabels is the binary label</span><br/>               <span style="color: #A0A0A0"> 170</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">    %%% for each watershed label</span><br/><span style="color: #FF0000">  0.48 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 171</span> <a name="Line171"></a><span style="color: #000000; background: #FF8080; padding: 1">    [SegImage LLabels] = <a href="file81.html">GraphCutSegment</a>(L, MeanColors, ULabels, BLabels,... </span><br/>               <span style="color: #A0A0A0"> 172</span> <span style="color: #000000; background: #FF8080; padding: 1">        FDist, BDist, lambda);</span><br/>               <span style="color: #A0A0A0"> 173</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 174</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">    %% Again Labeled from 1...</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 175</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    L = L+1; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 176</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    FLabels = FLabels+1; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 177</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    BLabels = BLabels+1; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 178</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    ULabels = ULabels+1; </span><br/>               <span style="color: #A0A0A0"> 179</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 180</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    if(i &lt; numIter) </span><br/>               <span style="color: #A0A0A0"> 181</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">        %%%%%% Do NOT do this if final iteration -- just display the segmented image</span><br/>               <span style="color: #A0A0A0"> 182</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">        %%%%%% Making new FLabels and BLabels based on the segmentation %%%%%%</span><br/><a name="Line183"></a>               <span style="color: #A0A0A0"> 183</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        newFLabels = ULabels(find(LLabels==1.0));</span><br/><a name="Line184"></a>               <span style="color: #A0A0A0"> 184</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        newBLabels = ULabels(find(LLabels==0.0));</span><br/>               <span style="color: #A0A0A0"> 185</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 186</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">        %%%%%% Whether new background labels will contain the old ones?</span><br/>               <span style="color: #A0A0A0"> 187</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">        % newBLabels = union(newBLabels,BLabels);</span><br/>               <span style="color: #A0A0A0"> 188</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 189</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        FColors = MeanColors(newFLabels,:);</span><br/>               <span style="color: #A0A0A0"> 190</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        BColors = MeanColors(newBLabels,:);</span><br/>               <span style="color: #A0A0A0"> 191</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 192</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">        %%%%%%%% Calculating FG and BG distances based on new segmentation %%%%%%%%%%%%%%%%%%</span><br/><a name="Line193"></a>               <span style="color: #A0A0A0"> 193</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        [newFDists newFInd] = ClustDistMembership(FColors, FCClusters, FCovs, FWeights);</span><br/><a name="Line194"></a>               <span style="color: #A0A0A0"> 194</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        [newBDists newBInd] = ClustDistMembership(BColors, BCClusters, BCovs, BWeights);</span><br/>               <span style="color: #A0A0A0"> 195</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 196</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        for k = 1:NumFClusters</span><br/><a name="Line197"></a>               <span style="color: #A0A0A0"> 197</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            relColors = FColors(find(newFInd==k),:);        %% Colors belonging to cluster k</span><br/>               <span style="color: #A0A0A0"> 198</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            FCClusters(:,k) = mean(relColors,1)';</span><br/>               <span style="color: #A0A0A0"> 199</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            FCovs(:,:,k) = cov(relColors);</span><br/>               <span style="color: #A0A0A0"> 200</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            FWeights(1,k) = length(find(newFInd==k)) / length(newFInd);</span><br/>               <span style="color: #A0A0A0"> 201</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        end</span><br/>               <span style="color: #A0A0A0"> 202</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 203</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        for k=1:NumBClusters</span><br/><a name="Line204"></a>               <span style="color: #A0A0A0"> 204</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            relColors = BColors(find(newBInd==k),:);        %% Colors belonging to cluster k</span><br/>               <span style="color: #A0A0A0"> 205</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            BCClusters(:,k) = mean(relColors,1)';</span><br/>               <span style="color: #A0A0A0"> 206</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            BCovs(:,:,k) = cov(relColors);</span><br/>               <span style="color: #A0A0A0"> 207</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">            BWeights(1,k) = length(find(newBInd==k)) / length(newBInd);</span><br/>               <span style="color: #A0A0A0"> 208</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">        end</span><br/>               <span style="color: #A0A0A0"> 209</span> <span style="color: #A0A0A0; background: #FFFFFF; padding: 1">    end</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 210</span> <span style="color: #000000; background: #FFFFFF; padding: 1">end </span><br/>               <span style="color: #A0A0A0"> 211</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 212</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%%%%%%%%%%%    Display the segmented image   %%%%%%%%%%%%%%%%%%%</span><br/><a name="Line213"></a><span style="color: #FF0000">  0.23 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 213</span> <a name="Line213"></a><span style="color: #000000; background: #FFC6C6; padding: 1">edge_img = <a href="file82.html">edge</a>(SegImage,'canny'); </span><br/>               <span style="color: #A0A0A0"> 214</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 215</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% post-processing</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 216</span> <span style="color: #000000; background: #FFFFFF; padding: 1">[connectedLabel,num] = <a href="file108.html">bwlabel</a>(SegImage,8); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 217</span> <span style="color: #000000; background: #FFFFFF; padding: 1">areaL = zeros(1,num); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 218</span> <span style="color: #000000; background: #FFFFFF; padding: 1">for i = 1:num </span><br/><a name="Line219"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 219</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    [r,c] = find(connectedLabel == i); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 220</span> <span style="color: #000000; background: #FFFFFF; padding: 1">    areaL(i) = length(r); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 221</span> <span style="color: #000000; background: #FFFFFF; padding: 1">end </span><br/><a name="Line222"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 222</span> <span style="color: #000000; background: #FFFFFF; padding: 1">[C,Ind] = max(areaL); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 223</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage(connectedLabel ~= Ind) = 0; </span><br/><span style="color: #FF0000">  0.05 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 224</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage = <a href="file91.html">imfill</a>(SegImage); </span><br/><a name="Line225"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 225</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegMask = SegImage; </span><br/>               <span style="color: #A0A0A0"> 226</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 227</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Put image on black background</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 228</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage1 = SegImage; </span><br/><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 229</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage = <a href="file43.html">repmat</a>(SegImage,[1,1,3]); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 230</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegNewImage = uint8(SegImage) .* uint8(I); </span><br/>               <span style="color: #A0A0A0"> 231</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 232</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage1(SegImage1 == 0) = 255; </span><br/><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 233</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage1(SegImage1 == 1) = 0; </span><br/><a name="Line234"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 234</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegImage1 = <a href="file43.html">repmat</a>(SegImage1,[1,1,3]); </span><br/>               <span style="color: #A0A0A0"> 235</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%SegNewImage = SegNewImage + uint8(SegImage1);</span><br/>               <span style="color: #A0A0A0"> 236</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 237</span> <span style="color: #000000; background: #FFFFFF; padding: 1">SegNewImage1=SegNewImage+blurred; </span><br/>               <span style="color: #A0A0A0"> 238</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 239</span> <span style="color: #000000; background: #FFFFFF; padding: 1"><a href="file114.html">imwrite</a>(SegNewImage1,OutImName,'jpg'); </span><br/><span style="color: #FF0000">  0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 240</span> <span style="color: #000000; background: #FFFFFF; padding: 1">save(OutSegResult, 'SegMask'); </span><br/>               <span style="color: #A0A0A0"> 241</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 242</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% If AutoCut, just show the image</span><br/>               <span style="color: #A0A0A0"> 243</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% if(~alg)    </span><br/>               <span style="color: #A0A0A0"> 244</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     %figure;</span><br/>               <span style="color: #A0A0A0"> 245</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% %    imshow(uint8(SegNewImage));</span><br/>               <span style="color: #A0A0A0"> 246</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     imwrite(SegNewImage,OutImName,'jpg');</span><br/>               <span style="color: #A0A0A0"> 247</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% else</span><br/>               <span style="color: #A0A0A0"> 248</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     % If AutoRefine mark a segmentation boundary on original image</span><br/>               <span style="color: #A0A0A0"> 249</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     [IInd,JInd] = ind2sub(size(I1),find(edge_img));</span><br/>               <span style="color: #A0A0A0"> 250</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     boundImage1 = I(:,:,2);</span><br/>               <span style="color: #A0A0A0"> 251</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     boundImage1(find(edge_img)) = 255;</span><br/>               <span style="color: #A0A0A0"> 252</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     boundImage = I;</span><br/>               <span style="color: #A0A0A0"> 253</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     boundImage(:,:,2) = boundImage1;</span><br/>               <span style="color: #A0A0A0"> 254</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     </span><br/>               <span style="color: #A0A0A0"> 255</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%     % Set the image</span><br/>               <span style="color: #A0A0A0"> 256</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% %    set(ih, 'Cdata', uint8(boundImage));</span><br/>               <span style="color: #A0A0A0"> 257</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% %    axis('image');axis('ij');axis('off');</span><br/>               <span style="color: #A0A0A0"> 258</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% %    drawnow;</span><br/>               <span style="color: #A0A0A0"> 259</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% %    segImageHandle = figure;</span><br/>               <span style="color: #A0A0A0"> 260</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% %    imshow(uint8(SegNewImage));</span><br/>               <span style="color: #A0A0A0"> 261</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% end</span><br/>               <span style="color: #A0A0A0"> 262</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% % SegMask = SegImage;</span><br/>               <span style="color: #A0A0A0"> 263</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% SegResult = SegNewImage;</span><br/>               <span style="color: #A0A0A0"> 264</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 265</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Save Segmentation Result</span><br/>               <span style="color: #A0A0A0"> 266</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% save(OutSegResult, 'SegMask');</span><br/>               <span style="color: #A0A0A0"> 267</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% save OutSegResult SegMask SegResult;</span><br/>               <span style="color: #A0A0A0"> 268</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 269</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">% Required for AutoCutRefine</span><br/>               <span style="color: #A0A0A0"> 270</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%save(OutSegItr,'L', 'MeanColors', 'FLabels', 'BLabels', 'FCClusters',...</span><br/>               <span style="color: #A0A0A0"> 271</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%    'FCovs', 'FWeights', 'BCClusters', 'BCovs', 'BWeights');</span><br/>               <span style="color: #A0A0A0"> 272</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%save OutSegItr L MeanColors FLabels BLabels FCClusters FCovs FWeights BCClusters BCovs BWeights;</span><br/>               <span style="color: #A0A0A0"> 273</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 274</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%toc</span><br/>               <span style="color: #A0A0A0"> 275</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 276</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/>               <span style="color: #A0A0A0"> 277</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 278</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 279</span> <span style="color: #228B22; background: #FFFFFF; padding: 1">%%%%%%%%%%%%%%%%%%%%%% Helper Functions declarations  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span><br/>               <span style="color: #A0A0A0"> 280</span> <span style="color: #228B22; background: #FFFFFF; padding: 1"></span><br/></pre><p><p>Other subfunctions in this file are not included in this listing.</body></html>